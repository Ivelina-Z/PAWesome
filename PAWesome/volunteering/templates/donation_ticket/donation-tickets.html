{% extends 'base.html' %}
{% load static %}
{% load  custom_tags %}


{% block content %}
    <div class="d-flex flex-wrap justify-content-center mb-5">
        {% for food in object_list %}
            <div class="d-flex flex-column border justify-content-between py-2 px-2 mb-5 mx-3" style="width: 30%;">
                <div class="text-center">
                        <p>
                            {{ food.item }}
                        </p>

                        {% if food.count_quantity %}
                            <p>
                            {{ food.count_quantity }} бр.
                            </p>
                        {% elif food.weight_quantity %}
                            <p>
                                {{ food.weight_quantity }} кг.
                            </p>
                        {% endif %}
                    </div>

                <div class="d-flex flex-row justify-content-around">
                    <div class="delivery-info">
                        <p class="hover-trigger border text-muted text-center">
                            Информация за доставка
                        </p>
                        <ol class="hover-info">
                            {% for info in food.delivery_info.all %}
                                <li>
                                    <a class="dropdown-toggle text-wrap" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        {{ info }}
                                    </a>
                                    <div class="dropdown-menu">
                                        <ul class="dropdown-item">
                                            <li>
                                                Получател: {{ info.name }}
                                            </li>
                                            <li>
                                                Телефонен номер: {{ info.phone_number }}
                                            </li>
                                            <li>
                                                Адрес: {{ info }}
                                            </li>
                                            {% if info.additional_info %}
                                                <li class="text-wrap">
                                                    Допълнителна информация: {{ info.additional_info }}
                                                </li>
                                            {% endif %}
                                        </ul>
                                    </div>
                                </li>
                            {% endfor %}
                        </ol>
                    </div>
                </div>

                <div class="d-flex flex-row justify-content-center">
                    {% if request.user.is_authenticated %}
                        <a href="{% url 'donation-ticket-edit' food.pk %}"><i class="fas fa-pencil-alt mr-3"></i></a>
                        {% if request.user|has_group:'Organizations' %}
                            <a href="{% url 'donation-ticket-delete' food.pk %}"><i class="fas fa-times"></i></a>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
    {% if object_list %}
        <p class="text-center">Може да дарите както цялото, така и част от необходимото количество.</p>
    {% endif %}

{% endblock content %}


{% block js-scripts %}
    <script src="{% static 'js/show-hide-info.js' %}"></script>
{% endblock js-scripts %}
